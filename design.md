# 每日计划工具 - 界面设计文档

## 设计原则

本应用遵循 **Apple Human Interface Guidelines (HIG)**，确保应用体验如同原生 iOS 应用。设计基于 **移动竖屏 (9:16)** 和 **单手操作** 优化。

---

## 屏幕列表

### 主要屏幕（底部 Tab 导航）

| Tab | 屏幕名称 | 描述 |
|-----|---------|------|
| 1 | 今日 (Today) | 今日计划、番茄入口、今日统计 |
| 2 | 本周 (Week) | 本周目标、日历、成果、反思 |
| 3 | 统计 (Stats) | 番茄统计、精力曲线 |
| 4 | 目标 (Goals) | 使命、愿景、年目标 |
| 5 | 设置 (Settings) | 应用配置、数据管理 |

### 次要屏幕（模态/导航）

| 屏幕 | 入口 | 描述 |
|------|------|------|
| 番茄任务页 (Focus Timer) | 今日页面 | 圆形计时器、精力反馈 |
| 日期详情页 | 本周日历点击 | 当天完成任务详情 |
| 本周反思表单 | 本周页面 | 填写反思内容 |

---

## 各屏幕内容与功能

### 1. 今日页面 (Today)

**布局结构（从上到下）：**

```
┌─────────────────────────────┐
│  今日计划 - 最重要三件事      │
│  ┌─────────────────────────┐│
│  │ ○ 任务1 (Top3)          ││
│  │ ○ 任务2 (Top3)          ││
│  │ ○ 任务3 (Top3)          ││
│  │ + 添加更多任务           ││
│  └─────────────────────────┘│
├─────────────────────────────┤
│  🍅 番茄任务                 │
│  [点击进入专注计时 →]        │
├─────────────────────────────┤
│  今日番茄统计                │
│  🍅 3 次  ⏱️ 75 分钟         │
└─────────────────────────────┘
```

**功能：**
- 显示 Top3 待办任务（默认3个空位引导填写）
- 点击任务可完成（显示划线样式）
- 再次点击可撤销完成
- 完成的任务自动写入本周日历
- 番茄任务入口带图标
- 底部显示今日番茄次数和专注时长

### 2. 番茄任务页 (Focus Timer)

**布局结构：**

```
┌─────────────────────────────┐
│         ← 返回               │
├─────────────────────────────┤
│                             │
│      ┌─────────────┐        │
│      │    🍅       │        │
│      │   25:00     │        │
│      │  (可拖动)    │        │
│      └─────────────┘        │
│                             │
│    [开始] [暂停] [放弃]      │
│                             │
└─────────────────────────────┘
```

**功能：**
- 圆形计时器，中心显示番茄图标
- 拖动圆圈设置时间（5-60分钟，默认25分钟）
- 开始/暂停/继续/放弃按钮
- 完成后播放提示音
- 弹出精力反馈弹窗（1-5分 + 可选标签）
- 保存番茄 Session 记录

### 3. 本周页面 (Week)

**布局结构：**

```
┌─────────────────────────────┐
│  本周核心目标                │
│  ┌─────────────────────────┐│
│  │ ○ 目标1                 ││
│  │ ○ 目标2                 ││
│  │ + 添加目标              ││
│  └─────────────────────────┘│
├─────────────────────────────┤
│  本周日历                    │
│  ┌──┬──┬──┬──┬──┬──┬──┐    │
│  │一│二│三│四│五│六│日│    │
│  │ 2│ 3│ 1│ 0│ 4│ 2│ 1│    │
│  └──┴──┴──┴──┴──┴──┴──┘    │
├─────────────────────────────┤
│  [生成本周成果]              │
├─────────────────────────────┤
│  [本周反思 →]                │
└─────────────────────────────┘
```

**功能：**
- 本周核心目标（5-10条，可完成/备注）
- 7天日历视图，显示每天完成任务数
- 点击日期查看详情
- 生成本周成果（可复制）
- 本周反思表单

### 4. 统计页面 (Stats)

**布局结构：**

```
┌─────────────────────────────┐
│  [本周] [本月] [本年度]      │
├─────────────────────────────┤
│  番茄统计                    │
│  🍅 21 次   ⏱️ 525 分钟      │
├─────────────────────────────┤
│  精力曲线                    │
│  ┌─────────────────────────┐│
│  │     *                   ││
│  │  *     *    *           ││
│  │*          *   *    *    ││
│  │─────────────────────────││
│  │一 二 三 四 五 六 日      ││
│  └─────────────────────────┘│
└─────────────────────────────┘
```

**功能：**
- 时间范围切换（本周/本月/本年度）
- 番茄数量和专注时间统计
- 精力曲线折线图（基于 energyScore 平均值）

### 5. 目标页面 (Goals)

**布局结构：**

```
┌─────────────────────────────┐
│  使命 (Mission)              │
│  ┌─────────────────────────┐│
│  │ 我的人生使命...          ││
│  └─────────────────────────┘│
├─────────────────────────────┤
│  愿景 (Vision)               │
│  ┌─────────────────────────┐│
│  │ 我的愿景...              ││
│  └─────────────────────────┘│
├─────────────────────────────┤
│  年目标                      │
│  ┌─────────────────────────┐│
│  │ ○ 目标1 [████░░] 70%    ││
│  │ ○ 目标2 [██░░░░] 30%    ││
│  │ + 添加年目标             ││
│  └─────────────────────────┘│
└─────────────────────────────┘
```

**功能：**
- 使命文本输入
- 愿景文本输入
- 年目标列表（标题、分类、进度0-100、备注）
- 年目标可勾选完成

### 6. 设置页面 (Settings)

**布局结构：**

```
┌─────────────────────────────┐
│  番茄设置                    │
│  默认时长    [25] 分钟       │
│  最大时长    [60] 分钟       │
├─────────────────────────────┤
│  提醒设置                    │
│  语音提示    [开关]          │
├─────────────────────────────┤
│  外观                        │
│  深色模式    [开关]          │
├─────────────────────────────┤
│  数据管理                    │
│  [清除全部数据]              │
├─────────────────────────────┤
│  关于                        │
│  版本号: 1.0.0               │
│  [隐私政策]                  │
└─────────────────────────────┘
```

---

## 关键用户流程

### 流程1：完成今日任务
1. 用户在「今日」页面查看 Top3 任务
2. 点击任务 → 任务显示划线样式（已完成）
3. 任务自动写入本周日历对应日期
4. 再次点击可撤销完成

### 流程2：番茄专注
1. 用户点击「番茄任务」入口
2. 进入番茄计时页面
3. 拖动圆圈设置时间（默认25分钟）
4. 点击「开始」按钮
5. 计时结束 → 播放提示音
6. 弹出精力反馈弹窗
7. 选择评分（1-5）和标签（可选）
8. 保存 Session → 返回今日页面
9. 今日统计自动更新

### 流程3：查看本周日历
1. 用户切换到「本周」Tab
2. 查看7天日历，每天显示完成任务数
3. 点击某一天 → 展开当天详情
4. 查看完成的任务列表和番茄统计

### 流程4：生成本周成果
1. 用户点击「生成本周成果」按钮
2. 系统汇总本周数据
3. 生成成果文本（任务数、番茄数、时长）
4. 用户可复制分享

---

## 颜色方案

| 用途 | 浅色模式 | 深色模式 |
|------|---------|---------|
| 主色 (Primary) | #FF6B6B | #FF8585 |
| 背景 (Background) | #FFFFFF | #1A1A2E |
| 表面 (Surface) | #F8F9FA | #252540 |
| 文字 (Foreground) | #2D3436 | #EAEAEA |
| 次要文字 (Muted) | #636E72 | #9BA1A6 |
| 边框 (Border) | #E5E7EB | #3D3D5C |
| 成功 (Success) | #00B894 | #55EFC4 |
| 警告 (Warning) | #FDCB6E | #FFEAA7 |
| 错误 (Error) | #E74C3C | #FF7675 |

**品牌色说明：**
- 主色采用番茄红色，呼应「番茄工作法」主题
- 整体风格简洁现代，符合 iOS 设计规范

---

## 数据模型（固定，不可重构）

### TodoTask（今日计划任务）
```typescript
{
  id: string;
  title: string;
  isCompleted: boolean;
  isTop3: boolean;
  createdAt: string;
  completedAt: string | null;
  date: string; // YYYY-MM-DD
}
```

### PomodoroSession（番茄记录）
```typescript
{
  id: string;
  startAt: string;
  endAt: string;
  durationMinutes: number;
  date: string; // YYYY-MM-DD
  isCompleted: boolean;
  energyScore: number | null; // 1-5
  energyTag: string | null; // 高能/平稳/低能/疲惫/心流
}
```

### WeeklyGoal（本周核心目标）
```typescript
{
  id: string;
  title: string;
  isCompleted: boolean;
  createdAt: string;
  weekStartDate: string;
  notes?: string;
}
```

### WeeklyReflection（本周反思）
```typescript
{
  id: string;
  weekStartDate: string;
  focusMinutesAuto: number;
  top3Achievements: string[];
  gratitude3: string[];
  distractions: string[];
  createdAt: string;
}
```

### YearGoal（年目标）
```typescript
{
  id: string;
  title: string;
  category?: string;
  progress: number; // 0-100
  notes?: string;
  isCompleted: boolean;
  createdAt: string;
}
```

### Settings（设置）
```typescript
{
  defaultPomodoroMinutes: number; // 默认25
  maxPomodoroMinutes: number; // 默认60
  voiceEnabled: boolean;
  darkMode: boolean;
  mission?: string;
  vision?: string;
}
```
